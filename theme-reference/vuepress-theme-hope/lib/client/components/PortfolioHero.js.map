{"version":3,"file":"PortfolioHero.js","sourceRoot":"","sources":["../../../src/client/components/PortfolioHero.ts"],"names":[],"mappings":"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","sourcesContent":["import { hasGlobalComponent, isString } from \"@vuepress/helper/client\";\nimport type { SlotsType, VNode } from \"vue\";\nimport {\n  computed,\n  defineComponent,\n  h,\n  nextTick,\n  onMounted,\n  ref,\n  resolveComponent,\n  watch,\n} from \"vue\";\nimport { usePageFrontmatter, withBase } from \"vuepress/client\";\n\nimport { DropTransition } from \"@theme-hope/components/transitions/index\";\nimport { useAuthorInfo } from \"@theme-hope/composables/index\";\n\nimport type {\n  PortfolioMedia,\n  ThemePortfolioFrontmatter,\n} from \"../../shared/index.js\";\n\nimport \"../styles/portfolio-hero.scss\";\n\nexport interface PortfolioAvatar {\n  avatar: string | null;\n  avatarDark: string | null;\n  alt: string;\n  avatarStyle: string | Record<string, string> | undefined;\n}\n\nexport interface PortfolioInfo {\n  name: string;\n  welcome: string;\n  title: string;\n  titles: string[];\n  medias: PortfolioMedia[] | null;\n}\n\nexport interface PortfolioBackground {\n  image: string | null;\n  imageDark: string | null;\n  bgStyle: string | Record<string, string> | undefined;\n}\n\nexport default defineComponent({\n  name: \"PortfolioHero\",\n\n  slots: Object as SlotsType<{\n    avatar?: (props: PortfolioAvatar) => VNode[] | VNode | null;\n    info?: (props: PortfolioInfo) => VNode[] | VNode | null;\n    bg?: (props: PortfolioBackground) => VNode[] | VNode | null;\n  }>,\n\n  setup(_props, { slots }) {\n    const authorInfo = useAuthorInfo();\n    const frontmatter = usePageFrontmatter<ThemePortfolioFrontmatter>();\n\n    const index = ref(0);\n    const currentTitle = computed(\n      () => frontmatter.value.titles?.[index.value] ?? \"\",\n    );\n    const title = ref(\"\");\n\n    const avatar = computed(() => {\n      const { name, avatar, avatarDark, avatarAlt, avatarStyle } =\n        frontmatter.value;\n\n      return {\n        name: name ?? authorInfo.value.name,\n        avatar: avatar ? withBase(avatar) : null,\n        avatarDark: avatarDark ? withBase(avatarDark) : null,\n        avatarStyle,\n        // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n        alt: (avatarAlt || name) ?? \"\",\n      };\n    });\n\n    const bg = computed(() => {\n      const { bgImage, bgImageDark, bgImageStyle } = frontmatter.value;\n\n      return {\n        image: isString(bgImage) ? withBase(bgImage) : null,\n        imageDark: isString(bgImageDark) ? withBase(bgImageDark) : null,\n        bgStyle: bgImageStyle,\n      };\n    });\n\n    const info = computed(() => {\n      const { welcome, name, titles = [], medias } = frontmatter.value;\n\n      return {\n        name: name ?? authorInfo.value.name,\n        welcome: welcome ?? \"ðŸ‘‹ Hi There, I'm\",\n        title: title.value,\n        titles: titles,\n        medias: medias ?? null,\n      };\n    });\n\n    const startTyping = () => {\n      title.value = \"\";\n      let charIndex = 0;\n      let shouldStop = false;\n\n      const typeNext = async (): Promise<void> => {\n        if (!shouldStop) {\n          title.value += currentTitle.value[charIndex];\n          charIndex += 1;\n\n          await nextTick();\n\n          if (charIndex < currentTitle.value.length) {\n            setTimeout(() => {\n              void typeNext();\n            }, 150);\n          } else {\n            const length = info.value.titles.length;\n\n            setTimeout(() => {\n              index.value =\n                length <= 1 || index.value === info.value.titles.length - 1\n                  ? 0\n                  : index.value + 1;\n            }, 1000);\n          }\n        }\n      };\n\n      void typeNext();\n\n      return (): void => {\n        shouldStop = true;\n      };\n    };\n\n    let stop: (() => void) | null;\n\n    onMounted(() => {\n      watch(\n        currentTitle,\n        () => {\n          stop?.();\n          stop = startTyping();\n        },\n        { immediate: true },\n      );\n    });\n\n    return (): VNode =>\n      h(\n        \"section\",\n        {\n          id: \"portfolio\",\n          class: [\"vp-portfolio\", { bg: bg.value.image }],\n        },\n        [\n          slots.bg?.(bg.value) ?? [\n            bg.value.image\n              ? h(\"div\", {\n                  class: [\"vp-portfolio-mask\", { light: bg.value.imageDark }],\n                  style: [\n                    {\n                      background: `url(${bg.value.image}) center/cover no-repeat`,\n                    },\n                    bg.value.bgStyle,\n                  ],\n                })\n              : null,\n            bg.value.imageDark\n              ? h(\"div\", {\n                  class: \"vp-portfolio-mask dark\",\n                  style: [\n                    {\n                      background: `url(${bg.value.imageDark}) center/cover no-repeat`,\n                    },\n                    bg.value.bgStyle,\n                  ],\n                })\n              : null,\n          ],\n          slots.avatar?.(avatar.value) ??\n            h(\"div\", { class: \"vp-portfolio-avatar\" }, [\n              h(DropTransition, { delay: 0.04 }, () => {\n                const {\n                  avatar: avatarLight,\n                  avatarDark,\n                  name: title,\n                  alt,\n                  avatarStyle: style,\n                } = avatar.value;\n\n                return [\n                  avatarLight\n                    ? h(\"img\", {\n                        key: \"light\",\n                        class: { light: avatarDark },\n                        src: avatarLight,\n                        title,\n                        alt,\n                        style,\n                      })\n                    : null,\n                  avatarDark\n                    ? h(\"img\", {\n                        key: \"dark\",\n                        class: \"dark\",\n                        src: avatarDark,\n                        title,\n                        alt,\n                        style,\n                      })\n                    : null,\n                ];\n              }),\n            ]),\n          h(\n            \"div\",\n            { class: \"vp-portfolio-container\" },\n            slots.info?.(info.value) ??\n              h(\"div\", { class: \"vp-portfolio-info\" }, [\n                h(DropTransition, { appear: true, delay: 0.08 }, () =>\n                  h(\n                    \"h6\",\n                    { class: \"vp-portfolio-welcome\" },\n                    info.value.welcome,\n                  ),\n                ),\n                h(DropTransition, { appear: true, delay: 0.12 }, () =>\n                  h(\n                    \"h1\",\n                    { class: \"vp-portfolio-name\", id: \"main-title\" },\n                    info.value.name,\n                  ),\n                ),\n                h(DropTransition, { appear: true, delay: 0.16 }, () =>\n                  h(\"h2\", { class: \"vp-portfolio-title\" }, title.value),\n                ),\n\n                h(DropTransition, { appear: true, delay: 0.2 }, () =>\n                  info.value.medias\n                    ? h(\n                        \"div\",\n                        { class: \"vp-portfolio-medias\" },\n                        info.value.medias.map(({ name, url, icon }) =>\n                          h(\n                            \"a\",\n                            {\n                              class: \"vp-portfolio-media\",\n                              href: url,\n                              rel: \"noopener noreferrer\",\n                              target: \"_blank\",\n                              title: name,\n                            },\n                            h(resolveComponent(\"VPIcon\"), {\n                              icon,\n                              sizing: \"both\",\n                            }),\n                          ),\n                        ),\n                      )\n                    : hasGlobalComponent(\"SocialMedias\")\n                      ? h(resolveComponent(\"SocialMedias\"))\n                      : null,\n                ),\n              ]),\n          ),\n        ],\n      );\n  },\n});\n"]}