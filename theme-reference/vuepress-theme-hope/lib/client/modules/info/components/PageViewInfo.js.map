{"version":3,"file":"PageViewInfo.js","sourceRoot":"","sources":["../../../../../src/client/modules/info/components/PageViewInfo.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,yBAAyB,CAAC;AACnD,OAAO,EAAE,mBAAmB,EAAE,MAAM,cAAc,CAAC;AAEnD,OAAO,EAAE,eAAe,EAAE,CAAC,EAAE,GAAG,EAAE,UAAU,EAAE,MAAM,KAAK,CAAC;AAC1D,OAAO,EAAE,QAAQ,EAAE,MAAM,iBAAiB,CAAC;AAE3C,OAAO,EAAE,OAAO,EAAE,MAAM,+BAA+B,CAAC;AACxD,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,2CAA2C,CAAC;AAC9E,OAAO,EAAE,aAAa,EAAE,MAAM,4CAA4C,CAAC;AAE3E,eAAe,eAAe,CAAC;IAC7B,IAAI,EAAE,cAAc;IAEpB,YAAY,EAAE,KAAK;IAEnB,KAAK,EAAE;QACL;;;;WAIG;QACH,QAAQ,EAAE;YACR,IAAI,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC;YACvB,OAAO,EAAE,KAAK;SACf;KACF;IAED,KAAK,CAAC,KAAK;QACT,MAAM,KAAK,GAAG,QAAQ,EAAE,CAAC;QACzB,MAAM,UAAU,GAAG,aAAa,EAAE,CAAC;QACnC,MAAM,MAAM,GAAG,OAAO,EAAE,CAAC;QAEzB,MAAM,eAAe,GAAG,UAAU,EAAe,CAAC;QAClD,MAAM,SAAS,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QAEzB,mBAAmB,CACjB,eAAe,EACf,GAAG,EAAE;YACH,oEAAoE;YACpE,MAAM,KAAK,GAAG,eAAe,CAAC,KAAM,CAAC,WAAW,CAAC;YAEjD,IAAI,KAAK,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;gBAAE,SAAS,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;QACtE,CAAC,EACD,EAAE,SAAS,EAAE,IAAI,EAAE,CACpB,CAAC;QAEF,OAAO,GAAiB,EAAE,CACxB,KAAK,CAAC,QAAQ;YACZ,CAAC,CAAC,CAAC,CACC,MAAM,EACN;gBACE,KAAK,EAAE,oBAAoB;gBAC3B,YAAY,EAAE,GAAG,UAAU,CAAC,KAAK,CAAC,KAAK,GACrC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IACtB,EAAE;gBACF,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,kBAAkB,EAAE,IAAI,EAAE,CAAC;aACtD,EACD;gBACE,CAAC,CAAC,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,QAAQ,CAAC;gBAC9C,CAAC,CACC,MAAM,EACN;oBACE,GAAG,EAAE,eAAe;oBACpB,EAAE,EAAE,UAAU;oBACd,KAAK,EAAE,mCAAmC;oBAC1C,WAAW,EAAE,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC;wBACnC,CAAC,CAAC,KAAK,CAAC,QAAQ;wBAChB,CAAC,CAAC,KAAK,CAAC,IAAI;oBACd,eAAe,EAAE,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC;wBACvC,CAAC,CAAC,KAAK,CAAC,QAAQ;wBAChB,CAAC,CAAC,KAAK,CAAC,IAAI;iBACf,EACD,KAAK,CACN;aACF,CACF;YACH,CAAC,CAAC,IAAI,CAAC;IACb,CAAC;CACF,CAAC,CAAC","sourcesContent":["import { isString } from \"@vuepress/helper/client\";\nimport { useMutationObserver } from \"@vueuse/core\";\nimport type { VNode } from \"vue\";\nimport { defineComponent, h, ref, shallowRef } from \"vue\";\nimport { useRoute } from \"vuepress/client\";\n\nimport { usePure } from \"@theme-hope/composables/index\";\nimport { EyeIcon, FireIcon } from \"@theme-hope/modules/info/components/icons\";\nimport { useMetaLocale } from \"@theme-hope/modules/info/composables/index\";\n\nexport default defineComponent({\n  name: \"PageViewInfo\",\n\n  inheritAttrs: false,\n\n  props: {\n    /**\n     * Whether show pageview and it's path\n     *\n     * ÊòØÂê¶ÊòæÁ§∫ÊµèËßàÈáè‰ª•ÂèäÂÖ∂Ë∑ØÂæÑ\n     */\n    pageview: {\n      type: [Boolean, String],\n      default: false,\n    },\n  },\n\n  setup(props) {\n    const route = useRoute();\n    const metaLocale = useMetaLocale();\n    const isPure = usePure();\n\n    const pageviewElement = shallowRef<HTMLElement>();\n    const pageViews = ref(0);\n\n    useMutationObserver(\n      pageviewElement,\n      () => {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const count = pageviewElement.value!.textContent;\n\n        if (count && !isNaN(Number(count))) pageViews.value = Number(count);\n      },\n      { childList: true },\n    );\n\n    return (): VNode | null =>\n      props.pageview\n        ? h(\n            \"span\",\n            {\n              class: \"page-pageview-info\",\n              \"aria-label\": `${metaLocale.value.views}${\n                isPure.value ? \"\" : \"üî¢\"\n              }`,\n              ...(isPure.value ? {} : { \"data-balloon-pos\": \"up\" }),\n            },\n            [\n              h(pageViews.value < 1000 ? EyeIcon : FireIcon),\n              h(\n                \"span\",\n                {\n                  ref: pageviewElement,\n                  id: \"ArtalkPV\",\n                  class: \"vp-pageview waline-pageview-count\",\n                  \"data-path\": isString(props.pageview)\n                    ? props.pageview\n                    : route.path,\n                  \"data-page-key\": isString(props.pageview)\n                    ? props.pageview\n                    : route.path,\n                },\n                \"...\",\n              ),\n            ],\n          )\n        : null;\n  },\n});\n"]}