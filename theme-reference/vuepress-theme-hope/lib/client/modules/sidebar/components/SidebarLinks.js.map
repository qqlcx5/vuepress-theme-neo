{"version":3,"file":"SidebarLinks.js","sourceRoot":"","sources":["../../../../../src/client/modules/sidebar/components/SidebarLinks.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,eAAe,EAAE,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,KAAK,CAAC;AACrD,OAAO,EAAE,QAAQ,EAAE,MAAM,iBAAiB,CAAC;AAE3C,OAAO,YAAY,MAAM,qDAAqD,CAAC;AAC/E,OAAO,YAAY,MAAM,qDAAqD,CAAC;AAC/E,OAAO,EAAE,mBAAmB,EAAE,MAAM,yCAAyC,CAAC;AAI9E,OAAO,8BAA8B,CAAC;AAEtC,eAAe,eAAe,CAAC;IAC7B,IAAI,EAAE,cAAc;IAEpB,KAAK,EAAE;QACL;;;;WAIG;QACH,MAAM,EAAE;YACN,IAAI,EAAE,KAAgC;YACtC,QAAQ,EAAE,IAAI;SACf;KACF;IAED,KAAK,CAAC,KAAK;QACT,MAAM,KAAK,GAAG,QAAQ,EAAE,CAAC;QACzB,MAAM,cAAc,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAE/B,MAAM,WAAW,GAAG,CAAC,KAAa,EAAQ,EAAE;YAC1C,cAAc,CAAC,KAAK,GAAG,KAAK,KAAK,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;QACrE,CAAC,CAAC;QAEF,KAAK,CACH,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,EAChB,GAAS,EAAE;YACT,MAAM,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE,CAC5C,mBAAmB,CAAC,KAAK,EAAE,IAAI,CAAC,CACjC,CAAC;YAEF,cAAc,CAAC,KAAK,GAAG,KAAK,CAAC;QAC/B,CAAC,EACD,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,CACnC,CAAC;QAEF,OAAO,GAAiB,EAAE,CACxB,CAAC,CACC,IAAI,EACJ,EAAE,KAAK,EAAE,kBAAkB,EAAE,EAC7B,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,CACjC,CAAC,CACC,IAAI,EACJ,UAAU,IAAI,MAAM;YAClB,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE;gBACd,MAAM;gBACN,IAAI,EAAE,KAAK,KAAK,cAAc,CAAC,KAAK;gBACpC,QAAQ,EAAE,GAAG,EAAE;oBACb,WAAW,CAAC,KAAK,CAAC,CAAC;gBACrB,CAAC;aACF,CAAC;YACJ,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,EAAE,MAAM,EAAE,CAAC,CAChC,CACF,CACF,CAAC;IACN,CAAC;CACF,CAAC,CAAC","sourcesContent":["import type { PropType, VNode } from \"vue\";\nimport { defineComponent, h, ref, watch } from \"vue\";\nimport { useRoute } from \"vuepress/client\";\n\nimport SidebarChild from \"@theme-hope/modules/sidebar/components/SidebarChild\";\nimport SidebarGroup from \"@theme-hope/modules/sidebar/components/SidebarGroup\";\nimport { isActiveSidebarItem } from \"@theme-hope/modules/sidebar/utils/index\";\n\nimport type { SidebarItem } from \"../utils/index.js\";\n\nimport \"../styles/sidebar-links.scss\";\n\nexport default defineComponent({\n  name: \"SidebarLinks\",\n\n  props: {\n    /**\n     * Sidebar links config\n     *\n     * 侧边栏链接配置\n     */\n    config: {\n      type: Array as PropType<SidebarItem[]>,\n      required: true,\n    },\n  },\n\n  setup(props) {\n    const route = useRoute();\n    const openGroupIndex = ref(-1);\n\n    const toggleGroup = (index: number): void => {\n      openGroupIndex.value = index === openGroupIndex.value ? -1 : index;\n    };\n\n    watch(\n      () => route.path,\n      (): void => {\n        const index = props.config.findIndex((item) =>\n          isActiveSidebarItem(route, item),\n        );\n\n        openGroupIndex.value = index;\n      },\n      { immediate: true, flush: \"post\" },\n    );\n\n    return (): VNode | null =>\n      h(\n        \"ul\",\n        { class: \"vp-sidebar-links\" },\n        props.config.map((config, index) =>\n          h(\n            \"li\",\n            \"children\" in config\n              ? h(SidebarGroup, {\n                  config,\n                  open: index === openGroupIndex.value,\n                  onToggle: () => {\n                    toggleGroup(index);\n                  },\n                })\n              : h(SidebarChild, { config }),\n          ),\n        ),\n      );\n  },\n});\n"]}