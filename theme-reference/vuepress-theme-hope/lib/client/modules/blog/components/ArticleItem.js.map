{"version":3,"file":"ArticleItem.js","sourceRoot":"","sources":["../../../../../src/client/modules/blog/components/ArticleItem.ts"],"names":[],"mappings":"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","sourcesContent":["import type { PropType, SlotsType, VNode } from \"vue\";\nimport { defineComponent, h, toRef } from \"vue\";\nimport { RouteLink, useRouter, withBase } from \"vuepress/client\";\n\nimport {\n  SlideIcon,\n  StickyIcon,\n} from \"@theme-hope/modules/blog/components/icons\";\nimport { useArticleInfo } from \"@theme-hope/modules/blog/composables/index\";\nimport { LockIcon } from \"@theme-hope/modules/encrypt/components/icons\";\nimport type { PageInfoProps } from \"@theme-hope/modules/info/components/PageInfo\";\nimport PageInfo from \"@theme-hope/modules/info/components/PageInfo\";\n\nimport type {\n  ArticleInfoData,\n  PageInfoData,\n} from \"../../../../shared/index.js\";\nimport {\n  ArticleInfo,\n  PageInfo as PageInfoEnum,\n  PageType,\n} from \"../../../../shared/index.js\";\n\nimport \"../styles/article-item.scss\";\n\nexport default defineComponent({\n  name: \"ArticleItem\",\n\n  props: {\n    /**\n     * Article information\n     *\n     * 文章信息\n     */\n    info: {\n      type: Object as PropType<PageInfoData & ArticleInfoData>,\n      required: true,\n    },\n\n    /**\n     * Article path\n     *\n     * 文章路径\n     */\n    path: { type: String, required: true },\n  },\n\n  slots: Object as SlotsType<{\n    cover?: (props: { cover: string | undefined }) => VNode[] | VNode | null;\n    title?: (props: {\n      title: string;\n      isEncrypted?: boolean;\n      type: string;\n    }) => VNode[] | VNode | null;\n    excerpt?: (props: {\n      excerpt: string | undefined;\n    }) => VNode[] | VNode | null;\n    info?: (props: { info: PageInfoProps }) => VNode[] | VNode | null;\n  }>,\n\n  setup(props, { slots }) {\n    const articleInfo = toRef(props, \"info\");\n    const { info: pageInfo, items } = useArticleInfo(props);\n    const router = useRouter();\n\n    return (): VNode => {\n      const {\n        [PageInfoEnum.title]: title,\n        [ArticleInfo.type]: type,\n        [ArticleInfo.isEncrypted]: isEncrypted = false,\n        [ArticleInfo.cover]: cover,\n        [ArticleInfo.excerpt]: excerpt,\n        [ArticleInfo.sticky]: sticky,\n      } = articleInfo.value;\n      const info = pageInfo.value;\n\n      return h(\n        \"div\",\n        {\n          class: \"vp-article-wrapper\",\n          onClick: (event: MouseEvent) => {\n            if ((event.target as HTMLElement | undefined)?.matches(\"summary\"))\n              return;\n\n            event.preventDefault();\n            void router.push(props.path);\n          },\n        },\n        h(\n          \"article\",\n          {\n            class: \"vp-article-item\",\n            vocab: \"https://schema.org/\",\n            typeof: \"Article\",\n          },\n          [\n            slots.cover?.({ cover }) ??\n              (cover\n                ? [\n                    h(\"img\", {\n                      class: \"vp-article-cover\",\n                      src: withBase(cover),\n                      alt: \"\",\n                      loading: \"lazy\",\n                    }),\n                    h(\"meta\", {\n                      property: \"image\",\n                      content: withBase(cover),\n                    }),\n                  ]\n                : []),\n            sticky ? h(StickyIcon) : null,\n            h(\n              RouteLink,\n              { to: props.path },\n              () =>\n                slots.title?.({ title, isEncrypted, type }) ??\n                h(\"header\", { class: \"vp-article-title\" }, [\n                  isEncrypted ? h(LockIcon) : null,\n                  type === PageType.slide ? h(SlideIcon) : null,\n                  h(\"span\", { property: \"headline\" }, title),\n                ]),\n            ),\n            slots.excerpt?.({ excerpt }) ??\n              (excerpt\n                ? h(\"div\", {\n                    class: \"vp-article-excerpt\",\n                    innerHTML: excerpt,\n                  })\n                : null),\n            h(\"hr\", { class: \"vp-article-hr\" }),\n            slots.info?.({ info }) ??\n              h(PageInfo, {\n                info,\n                ...(items.value ? { items: items.value } : {}),\n              }),\n          ],\n        ),\n      );\n    };\n  },\n});\n"]}