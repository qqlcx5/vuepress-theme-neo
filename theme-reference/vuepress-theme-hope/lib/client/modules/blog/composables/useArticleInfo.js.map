{"version":3,"file":"useArticleInfo.js","sourceRoot":"","sources":["../../../../../src/client/modules/blog/composables/useArticleInfo.ts"],"names":[],"mappings":"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","sourcesContent":["import { getDate } from \"@vuepress/helper/client\";\nimport {\n  getReadingTimeLocale,\n  useReadingTimeLocaleConfig,\n} from \"@vuepress/plugin-reading-time/client\";\nimport type { ComputedRef, Ref } from \"vue\";\nimport { computed, toRef } from \"vue\";\nimport type { AuthorInfo } from \"vuepress-shared/client\";\nimport { getAuthor, getCategory, getTag } from \"vuepress-shared/client\";\n\nimport { useThemeLocaleData } from \"@theme-hope/composables/index\";\nimport type { PageInfoProps } from \"@theme-hope/modules/info/components/PageInfo\";\nimport type {\n  PageCategory,\n  PageTag,\n} from \"@theme-hope/modules/info/utils/index\";\n\nimport { useBlogOptions } from \"./useBlogOptions.js\";\nimport { useCategoryMap } from \"./useCategoryMap.js\";\nimport { useTagMap } from \"./useTagMap.js\";\nimport type {\n  ArticleInfoData,\n  PageInfoType,\n} from \"../../../../shared/index.js\";\nimport { ArticleInfo } from \"../../../../shared/index.js\";\n\nexport type AuthorRef = ComputedRef<AuthorInfo[]>;\n\nexport const useArticleAuthor = (info: Ref<ArticleInfoData>): AuthorRef => {\n  const themeLocale = useThemeLocaleData();\n\n  return computed(() => {\n    const { [ArticleInfo.author]: author } = info.value;\n\n    if (author) return getAuthor(author);\n    if (author === false) return [];\n\n    return getAuthor(themeLocale.value.author, false);\n  });\n};\n\nexport type CategoryRef = ComputedRef<PageCategory[]>;\n\nexport const useArticleCategory = (info: Ref<ArticleInfoData>): CategoryRef => {\n  const categoryMap = useCategoryMap();\n\n  return computed(() =>\n    getCategory(info.value[ArticleInfo.category]).map((name) => ({\n      name,\n      path: categoryMap.value.map[name].path,\n    })),\n  );\n};\n\nexport type TagRef = ComputedRef<PageTag[]>;\n\nexport const useArticleTag = (info: Ref<ArticleInfoData>): TagRef => {\n  const tagMap = useTagMap();\n\n  return computed(() =>\n    getTag(info.value[ArticleInfo.tag]).map((name) => ({\n      name,\n      path: tagMap.value.map[name].path,\n    })),\n  );\n};\n\nexport type DateRef = ComputedRef<Date | null>;\n\nexport const useArticleDate = (info: Ref<ArticleInfoData>): DateRef =>\n  computed(() => {\n    const { [ArticleInfo.date]: timestamp } = info.value;\n\n    return getDate(timestamp);\n  });\n\nexport const useArticleInfo = (props: {\n  info: ArticleInfoData;\n  path: string;\n}): {\n  info: ComputedRef<PageInfoProps>;\n  items: ComputedRef<PageInfoType[] | false | undefined>;\n} => {\n  const articleInfo = toRef(props, \"info\");\n  const blogOptions = useBlogOptions();\n  const author = useArticleAuthor(articleInfo);\n  const category = useArticleCategory(articleInfo);\n  const tag = useArticleTag(articleInfo);\n  const date = useArticleDate(articleInfo);\n  const readingTimeLocaleConfig = useReadingTimeLocaleConfig();\n\n  const info = computed(() => ({\n    author: author.value,\n    category: category.value,\n    date: date.value,\n    localizedDate: articleInfo.value[ArticleInfo.localizedDate] ?? \"\",\n    tag: tag.value,\n    isOriginal: articleInfo.value[ArticleInfo.isOriginal] ?? false,\n    readingTime: articleInfo.value[ArticleInfo.readingTime] ?? null,\n    readingTimeLocale:\n      articleInfo.value[ArticleInfo.readingTime] &&\n      readingTimeLocaleConfig.value\n        ? getReadingTimeLocale(\n            articleInfo.value[ArticleInfo.readingTime],\n            readingTimeLocaleConfig.value,\n          )\n        : null,\n    pageview: props.path,\n  }));\n\n  const items = computed(() => blogOptions.value.articleInfo);\n\n  return { info, items };\n};\n"]}