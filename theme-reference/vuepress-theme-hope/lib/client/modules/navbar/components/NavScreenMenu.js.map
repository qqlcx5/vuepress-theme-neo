{"version":3,"file":"NavScreenMenu.js","sourceRoot":"","sources":["../../../../../src/client/modules/navbar/components/NavScreenMenu.ts"],"names":[],"mappings":"AACA,OAAO,EACL,QAAQ,EACR,eAAe,EACf,CAAC,EACD,GAAG,EACH,gBAAgB,EAChB,KAAK,EACL,KAAK,GACN,MAAM,KAAK,CAAC;AACb,OAAO,EAAE,WAAW,EAAE,MAAM,iBAAiB,CAAC;AAE9C,OAAO,QAAQ,MAAM,iCAAiC,CAAC;AAIvD,OAAO,gCAAgC,CAAC;AAExC,eAAe,eAAe,CAAC;IAC7B,IAAI,EAAE,eAAe;IAErB,KAAK,EAAE;QACL;;;;WAIG;QACH,MAAM,EAAE;YACN,IAAI,EAAE,MAEL;YAED,QAAQ,EAAE,IAAI;SACf;KACF;IAED,KAAK,CAAC,KAAK;QACT,MAAM,IAAI,GAAG,WAAW,EAAE,CAAC;QAC3B,MAAM,MAAM,GAAG,KAAK,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAEtC,MAAM,SAAS,GAAG,QAAQ,CACxB,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,IAAI,MAAM,CAAC,KAAK,CAAC,IAAI,CAClD,CAAC;QAEF,MAAM,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;QAExB,KAAK,CACH,GAAG,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EACrB,GAAG,EAAE;YACH,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACrB,CAAC,CACF,CAAC;QAEF,MAAM,iBAAiB,GAAG,CAAI,IAAO,EAAE,GAAQ,EAAW,EAAE,CAC1D,GAAG,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,IAAI,CAAC;QAE/B,OAAO,GAAY,EAAE,CAAC;YACpB,CAAC,CACC,QAAQ,EACR;gBACE,IAAI,EAAE,QAAQ;gBACd,KAAK,EAAE,CAAC,0BAA0B,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;gBAC3D,YAAY,EAAE,SAAS,CAAC,KAAK;gBAC7B,OAAO,EAAE,GAAG,EAAE;oBACZ,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;gBAC3B,CAAC;aACF,EACD;gBACE,CAAC,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE;oBAC3B,CAAC,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE;wBAC5B,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,IAAI;wBACvB,MAAM,EAAE,MAAM;qBACf,CAAC;oBACF,KAAK,CAAC,MAAM,CAAC,IAAI;iBAClB,CAAC;gBACF,CAAC,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC;aAC7D,CACF;YACD,CAAC,CACC,IAAI,EACJ;gBACE,KAAK,EAAE,CAAC,oBAAoB,EAAE,EAAE,IAAI,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;aACrD,EACD,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE,CAClC,CAAC,CACC,IAAI,EACJ,EAAE,KAAK,EAAE,yBAAyB,EAAE,EACpC,UAAU,IAAI,KAAK;gBACjB,CAAC,CAAC;oBACE,CAAC,CACC,IAAI,EACJ,EAAE,KAAK,EAAE,6BAA6B,EAAE,EACxC,KAAK,CAAC,IAAI;wBACR,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE;4BACV,MAAM,EAAE,KAAwB;4BAChC,UAAU,EAAE,GAAG,EAAE;gCACf,IACE,iBAAiB,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;oCAC/C,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC;oCAE3B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;4BACvB,CAAC;yBACF,CAAC;wBACJ,CAAC,CAAC,KAAK,CAAC,IAAI,CACf;oBACD,CAAC,CACC,IAAI,EACJ,EAAE,KAAK,EAAE,6BAA6B,EAAE,EACxC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE,CAChC,CAAC,CACC,IAAI,EACJ,EAAE,KAAK,EAAE,4BAA4B,EAAE,EACvC,CAAC,CAAC,QAAQ,EAAE;wBACV,MAAM,EAAE,UAAU;wBAClB,UAAU,EAAE,GAAG,EAAE;4BACf,IACE,iBAAiB,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,CAAC;gCAC7C,iBAAiB,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;gCAE/C,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;wBACvB,CAAC;qBACF,CAAC,CACH,CACF,CACF;iBACF;gBACH,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE;oBACV,MAAM,EAAE,KAAK;oBACb,UAAU,EAAE,GAAG,EAAE;wBACf,IAAI,iBAAiB,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;4BACjD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;oBACvB,CAAC;iBACF,CAAC,CACP,CACF,CACF;SACF,CAAC;IACJ,CAAC;CACF,CAAC,CAAC","sourcesContent":["import type { PropType, VNode } from \"vue\";\nimport {\n  computed,\n  defineComponent,\n  h,\n  ref,\n  resolveComponent,\n  toRef,\n  watch,\n} from \"vue\";\nimport { usePageData } from \"vuepress/client\";\n\nimport AutoLink from \"@theme-hope/components/AutoLink\";\n\nimport type { AutoLinkOptions, NavGroup } from \"../../../../shared/index.js\";\n\nimport \"../styles/nav-screen-menu.scss\";\n\nexport default defineComponent({\n  name: \"NavScreenMenu\",\n\n  props: {\n    /**\n     * Navbar Screen nav-screen-menu list config\n     *\n     * 导航栏下拉列表配置\n     */\n    config: {\n      type: Object as PropType<\n        NavGroup<AutoLinkOptions | NavGroup<AutoLinkOptions>>\n      >,\n\n      required: true,\n    },\n  },\n\n  setup(props) {\n    const page = usePageData();\n    const config = toRef(props, \"config\");\n\n    const ariaLabel = computed(\n      () => config.value.ariaLabel ?? config.value.text,\n    );\n\n    const open = ref(false);\n\n    watch(\n      () => page.value.path,\n      () => {\n        open.value = false;\n      },\n    );\n\n    const isLastItemOfArray = <T>(item: T, arr: T[]): boolean =>\n      arr[arr.length - 1] === item;\n\n    return (): VNode[] => [\n      h(\n        \"button\",\n        {\n          type: \"button\",\n          class: [\"vp-nav-screen-menu-title\", { active: open.value }],\n          \"aria-label\": ariaLabel.value,\n          onClick: () => {\n            open.value = !open.value;\n          },\n        },\n        [\n          h(\"span\", { class: \"text\" }, [\n            h(resolveComponent(\"VPIcon\"), {\n              icon: config.value.icon,\n              sizing: \"both\",\n            }),\n            props.config.text,\n          ]),\n          h(\"span\", { class: [\"arrow\", open.value ? \"down\" : \"end\"] }),\n        ],\n      ),\n      h(\n        \"ul\",\n        {\n          class: [\"vp-nav-screen-menu\", { hide: !open.value }],\n        },\n        config.value.children.map((child) =>\n          h(\n            \"li\",\n            { class: \"vp-nav-screen-menu-item\" },\n            \"children\" in child\n              ? [\n                  h(\n                    \"h4\",\n                    { class: \"vp-nav-screen-menu-subtitle\" },\n                    child.link\n                      ? h(AutoLink, {\n                          config: child as AutoLinkOptions,\n                          onFocusout: () => {\n                            if (\n                              isLastItemOfArray(child, config.value.children) &&\n                              child.children.length === 0\n                            )\n                              open.value = false;\n                          },\n                        })\n                      : child.text,\n                  ),\n                  h(\n                    \"ul\",\n                    { class: \"vp-nav-screen-menu-subitems\" },\n                    child.children.map((grandchild) =>\n                      h(\n                        \"li\",\n                        { class: \"vp-nav-screen-menu-subitem\" },\n                        h(AutoLink, {\n                          config: grandchild,\n                          onFocusout: () => {\n                            if (\n                              isLastItemOfArray(grandchild, child.children) &&\n                              isLastItemOfArray(child, config.value.children)\n                            )\n                              open.value = false;\n                          },\n                        }),\n                      ),\n                    ),\n                  ),\n                ]\n              : h(AutoLink, {\n                  config: child,\n                  onFocusout: () => {\n                    if (isLastItemOfArray(child, config.value.children))\n                      open.value = false;\n                  },\n                }),\n          ),\n        ),\n      ),\n    ];\n  },\n});\n"]}