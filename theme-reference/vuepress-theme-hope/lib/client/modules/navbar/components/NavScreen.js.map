{"version":3,"file":"NavScreen.js","sourceRoot":"","sources":["../../../../../src/client/modules/navbar/components/NavScreen.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,cAAc,CAAC;AAE7C,OAAO,EACL,UAAU,EACV,eAAe,EACf,CAAC,EACD,SAAS,EACT,WAAW,EACX,UAAU,EACV,KAAK,GACN,MAAM,KAAK,CAAC;AACb,OAAO,EAAE,WAAW,EAAE,MAAM,iBAAiB,CAAC;AAE9C,OAAO,EAAE,aAAa,EAAE,MAAM,+BAA+B,CAAC;AAC9D,OAAO,cAAc,MAAM,sDAAsD,CAAC;AAClF,OAAO,eAAe,MAAM,wDAAwD,CAAC;AAErF,OAAO,2BAA2B,CAAC;AAEnC,eAAe,eAAe,CAAC;IAC7B,IAAI,EAAE,WAAW;IAEjB,KAAK,EAAE;QACL;;;;WAIG;QACH,IAAI,EAAE,OAAO;KACd;IAED,KAAK,EAAE,CAAC,OAAO,CAAC;IAEhB,KAAK,EAAE,MAGL;IAEF,KAAK,CAAC,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE;QAC1B,MAAM,IAAI,GAAG,WAAW,EAAE,CAAC;QAC3B,MAAM,EAAE,QAAQ,EAAE,GAAG,aAAa,EAAE,CAAC;QAErC,MAAM,IAAI,GAAG,UAAU,EAAe,CAAC;QACvC,MAAM,QAAQ,GAAG,aAAa,CAAC,IAAI,CAAC,CAAC;QAErC,SAAS,CAAC,GAAG,EAAE;YACb,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC;YAE3B,KAAK,CAAC,QAAQ,EAAE,CAAC,KAAK,EAAE,EAAE;gBACxB,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,IAAI,EAAE,CAAC;oBACzB,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;oBACvB,IAAI,CAAC,OAAO,CAAC,CAAC;gBAChB,CAAC;YACH,CAAC,CAAC,CAAC;YACH,KAAK,CACH,GAAG,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EACrB,GAAG,EAAE;gBACH,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;gBACvB,IAAI,CAAC,OAAO,CAAC,CAAC;YAChB,CAAC,CACF,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,WAAW,CAAC,GAAG,EAAE;YACf,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;QACzB,CAAC,CAAC,CAAC;QAEH,OAAO,GAAU,EAAE,CACjB,CAAC,CACC,UAAU,EACV;YACE,IAAI,EAAE,MAAM;YACZ,OAAO,EAAE,GAAG,EAAE;gBACZ,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC;YACxB,CAAC;YACD,YAAY,EAAE,GAAG,EAAE;gBACjB,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;YACzB,CAAC;SACF,EACD,GAAG,EAAE,CACH,KAAK,CAAC,IAAI;YACR,CAAC,CAAC,CAAC,CACC,KAAK,EACL,EAAE,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE,eAAe,EAAE,EAC5C,CAAC,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,yBAAyB,EAAE,EAAE;gBAC7C,KAAK,CAAC,MAAM,EAAE,EAAE;gBAChB,CAAC,CAAC,cAAc,CAAC;gBACjB,CAAC,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,oBAAoB,EAAE,EAAE,CAAC,CAAC,eAAe,CAAC,CAAC;gBAC7D,KAAK,CAAC,KAAK,EAAE,EAAE;aAChB,CAAC,CACH;YACH,CAAC,CAAC,IAAI,CACX,CAAC;IACN,CAAC;CACF,CAAC,CAAC","sourcesContent":["import { useScrollLock } from \"@vueuse/core\";\nimport type { SlotsType, VNode } from \"vue\";\nimport {\n  Transition,\n  defineComponent,\n  h,\n  onMounted,\n  onUnmounted,\n  shallowRef,\n  watch,\n} from \"vue\";\nimport { usePageData } from \"vuepress/client\";\n\nimport { useWindowSize } from \"@theme-hope/composables/index\";\nimport NavScreenLinks from \"@theme-hope/modules/navbar/components/NavScreenLinks\";\nimport OutlookSettings from \"@theme-hope/modules/outlook/components/OutlookSettings\";\n\nimport \"../styles/nav-screen.scss\";\n\nexport default defineComponent({\n  name: \"NavScreen\",\n\n  props: {\n    /**\n     * Whether to show the screen\n     *\n     * 是否显示\n     */\n    show: Boolean,\n  },\n\n  emits: [\"close\"],\n\n  slots: Object as SlotsType<{\n    before?: () => VNode[] | VNode | null;\n    after?: () => VNode[] | VNode | null;\n  }>,\n\n  setup(props, { emit, slots }) {\n    const page = usePageData();\n    const { isMobile } = useWindowSize();\n\n    const body = shallowRef<HTMLElement>();\n    const isLocked = useScrollLock(body);\n\n    onMounted(() => {\n      body.value = document.body;\n\n      watch(isMobile, (value) => {\n        if (!value && props.show) {\n          isLocked.value = false;\n          emit(\"close\");\n        }\n      });\n      watch(\n        () => page.value.path,\n        () => {\n          isLocked.value = false;\n          emit(\"close\");\n        },\n      );\n    });\n\n    onUnmounted(() => {\n      isLocked.value = false;\n    });\n\n    return (): VNode =>\n      h(\n        Transition,\n        {\n          name: \"fade\",\n          onEnter: () => {\n            isLocked.value = true;\n          },\n          onAfterLeave: () => {\n            isLocked.value = false;\n          },\n        },\n        () =>\n          props.show\n            ? h(\n                \"div\",\n                { id: \"nav-screen\", class: \"vp-nav-screen\" },\n                h(\"div\", { class: \"vp-nav-screen-container\" }, [\n                  slots.before?.(),\n                  h(NavScreenLinks),\n                  h(\"div\", { class: \"vp-outlook-wrapper\" }, h(OutlookSettings)),\n                  slots.after?.(),\n                ]),\n              )\n            : null,\n      );\n  },\n});\n"]}